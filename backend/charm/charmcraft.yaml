name: test-observer-api
type: charm
summary: |
  API to observe the status of artifact (snaps, debs, etc) testing
description: |
  API and dashboard to observe the status of artifact (snaps, debs, etc) test status
bases:
  - build-on:
      - name: ubuntu
        channel: "22.04"
    run-on:
      - name: ubuntu
        channel: "22.04"
assumes:
  - juju >= 2.9
  - k8s-api
containers:
  api:
    resource: api-image
requires:
  database:
    interface: postgresql_client
    limit: 1
  nginx-route:
    interface: nginx-route
provides:
  test-observer-rest-api:
    interface: http
    scope: global
resources:
  api-image:
    type: oci-image
    description: OCI image from GitHub Container Repository
    upstream-source: ghcr.io/canonical/test_observer/api:main
